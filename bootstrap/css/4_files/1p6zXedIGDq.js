if (self.CavalryLogger) { CavalryLogger.start_js(["GltKu"]); }

__d("NotifTestIDs",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={REACT_BLUE_BAR_JEWEL:"react_blue_bar_jewel",NON_REACT_BLUE_BAR_JEWEL:"non_react_blue_bar_jewel",REACT_NOTIF_LIST:"react_notif_list",SEE_ALL_LIST:"see_all_list",REACT_NOTIF_JEWEL_FLYOUT:"react_notif_jewel_flyout",NON_REACT_NOTIF_JEWEL_FLYOUT:"non_react_notif_jewel_flyout",CHEVRON:"chevron",REACT_MARK_ALL_AS_READ_LINK:"react_mark_all_as_read_link",NON_REACT_MARK_ALL_AS_READ_LINK:"non_react_mark_all_as_read_link",NOTIFICATION_SOUND_SETTING:"notifiation_sound_setting",NOTIFICATION_SOUND_SETTING_SELECTOR:"notifiation_sound_setting_selector",MESSAGE_SOUND_SETTING:"message_sound_setting",MESSAGE_SOUND_SETTING_SELECTOR:"message_sound_setting_selector",CLOSE_FRIEND_ACTIVITY_SELECTOR:"close_friend_activity_selector",BIRTHDAY_SELECTOR:"birthday_selector",ON_THIS_DAY_SELECTOR:"on_this_day_selector",TAGS_SELECTOR:"tags_selector",LIVE_VIDEO_SELECTOR:"live_video_selector",REACT_BADGE_COUNT_CONTAINER:"react_badge_count_container",NON_REACT_BADGE_COUNT_CONTAINER:"non_react_badge_count_container",BEEPER_LIST:"beeper_list",NON_REACT_SETTING_LINK:"non_react_setting_link",REACT_SETTING_LINK:"react_setting_link"};}),null);
__d('NotificationBeeperConst',['keyMirror'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={IDLE_DELAY:10000,ACTIVE_DELAY_LONG:4000,FADE_OUT_LENGTH:1500,BeepStates:c('keyMirror')({PENDING:true,RENDERED:true,READY_TO_HIDE:true,FADING_OUT:true})};f.exports=h;}),null);
__d('NotificationBeeperItemCloseButton.react',['cx','fbt','React','XUIAbstractGlyphButton.react'],(function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;l.prototype.render=function(){'use strict';return (c('React').createElement(c('XUIAbstractGlyphButton.react'),babelHelpers['extends']({},this.props,{className:"_3soc",title:i._("Fermer")})));};function l(){'use strict';j.apply(this,arguments);}f.exports=l;}),null);
__d('NotificationInterpolator',['Badge.react','React'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j){var k=null;if(j.entity.is_viewer_coworker===false||j.entity.is_multi_company_group===true)k=c('React').createElement(c('Badge.react'),{type:'work_non_coworker'});return c('React').createElement('span',{className:'fwb'},i,k);}f.exports=h;}),null);
__d('NotificationURI',['BusinessURI.brands','URI','isFacebookURI','VideoPermalinkURI'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={localize:function i(j){j=c('BusinessURI.brands')(j);if(!c('isFacebookURI')(j))return j.toString();var k=j.getSubdomain();return j.getUnqualifiedURI().getQualifiedURI().setSubdomain(k).toString();},snowliftable:function i(j){if(!j)return false;j=new (c('URI'))(j);var k=j.getQueryData();return c('isFacebookURI')(j)&&(c('VideoPermalinkURI').isValid(j)||'fbid' in k);},isVaultSetURI:function i(j){return this._areEquals(j,'/ajax/vault/sharer_preview.php');},isAlbumDraftRecoveryDialogURI:function i(j){return this._areEquals(j,'/ajax/photos/upload/overlay/');},_areEquals:function i(j,k){if(!j)return false;j=new (c('URI'))(j);return c('isFacebookURI')(j)&&j.getPath()===k;},_startsWith:function i(j,k){if(!j)return false;j=new (c('URI'))(j);return c('isFacebookURI')(j)&&j.getPath().startsWith(k);}};f.exports=h;}),null);
__d('NotificationBeeperItemContents.react',['cx','Animation','AsyncRequest','Bootloader','FBProfilePhotoShadow.react','Image.react','ImageBlock.react','NotificationBeeperItemCloseButton.react','NotificationInterpolator','NotificationURI','NotificationUserActions','React','ReactDOM','TextWithEntities.react','Timestamp.react'],(function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(){var l,m;'use strict';for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.$NotificationBeeperItemContents1=function(){c('NotificationUserActions').markNotificationsAsRead([this.props.beep.notificationID]);}.bind(this),this.$NotificationBeeperItemContents2=function(q){this.$NotificationBeeperItemContents1();this.props.onHide();if(q.button===1||q.altKey||q.ctrlKey||q.metaKey||q.shiftKey)return;var r=this.props.beep;if(c('NotificationURI').isAlbumDraftRecoveryDialogURI(r.link)){new (c('AsyncRequest'))(r.link).send();q.preventDefault();}else if(r.photo&&c('NotificationURI').snowliftable(r.link)){c('Bootloader').loadModules(["PhotoSnowlift"],function(s){s.bootstrap(r.link,q.currentTarget);},'NotificationBeeperItemContents.react');q.preventDefault();}else if(r.ajaxifyLink){c('Bootloader').loadModules(["AsyncDialog"],function(s){s.bootstrap(r.ajaxifyLink,q.currentTarget,'dialog');},'NotificationBeeperItemContents.react');q.preventDefault();}}.bind(this),this.$NotificationBeeperItemContents3=function(){this.$NotificationBeeperItemContents1();this.props.onHide();}.bind(this),this.$NotificationBeeperItemContents4=function(){new (c('Animation'))(c('ReactDOM').findDOMNode(this.refs.inner)).from('opacity','0').to('opacity','1').duration(200).go();}.bind(this),m;}k.prototype.componentDidMount=function(){'use strict';this.props.onReadyToHide(this.props.beep.notificationID);};k.prototype.componentDidUpdate=function(l){'use strict';if(l.beep.beepID!==this.props.beep.beepID){this.$NotificationBeeperItemContents4();this.props.onReadyToHide(this.props.beep.notificationID);}};k.prototype.render=function(){'use strict';var l=this.props.beep,m=((l.actors[0]||{}).profile_picture||{}).uri,n=(l.icon||{}).uri;return (c('React').createElement('div',{ref:'inner',className:this.props.className},c('React').createElement(c('NotificationBeeperItemCloseButton.react'),{onClick:this.$NotificationBeeperItemContents3}),c('React').createElement('a',{href:l.link,onClick:this.$NotificationBeeperItemContents2,className:"_3soi"},c('React').createElement(c('ImageBlock.react'),{className:"_3soj",spacing:'medium'},c('React').createElement(c('FBProfilePhotoShadow.react'),{className:"_2yt7"},c('React').createElement(c('Image.react'),{src:m,className:"_3sok"+(!m?' '+"hidden_elem":'')})),c('React').createElement('div',{className:"_3sol"},c('React').createElement(c('TextWithEntities.react'),{renderEmoticons:true,renderEmoji:true,interpolator:c('NotificationInterpolator'),ranges:l.text.ranges,aggregatedranges:l.text.aggregated_ranges,text:l.text.text}),c('React').createElement(c('ImageBlock.react'),{className:"_3som"},c('React').createElement(c('Image.react'),{className:"_1x8t"+(!n?' '+"hidden_elem":''),src:n}),c('React').createElement(c('Timestamp.react'),{time:l.timestamp.time,text:l.timestamp.text,verbose:l.timestamp.verbose})))))));};f.exports=k;}),null);
__d('NotificationBeeperItem.react',['cx','Animation','BrowserSupport','NotificationBeeperConst','NotificationBeeperItemContents.react','NotificationBeeperItemRenderersList','React','ReactDOM','Style','setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('NotificationBeeperConst').FADE_OUT_LENGTH;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;'use strict';for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.state={fadedIn:false,hidden:false},this.$NotificationBeeperItem2=function(){this.setState({hidden:true});}.bind(this),this.$NotificationBeeperItem3=function(r){if(r in c('NotificationBeeperItemRenderersList'))return c('NotificationBeeperItemRenderersList')[r];return c('NotificationBeeperItemContents.react');},n;}l.prototype.componentDidMount=function(){'use strict';var m;if(c('BrowserSupport').hasCSSAnimations()){m=this.setState.bind(this,{fadedIn:true},null);}else m=function(){new (c('Animation'))(c('ReactDOM').findDOMNode(this.refs.item)).from('top','-30px').from('opacity','0').to('top','0px').to('opacity','1').duration(200).ondone(this.setState.bind(this,{fadedIn:true},null)).go();}.bind(this);c('setTimeoutAcrossTransitions')(m,50);this.props.onInserted(this.props.beep);};l.prototype.componentWillUnmount=function(){'use strict';if(this.$NotificationBeeperItem1){this.$NotificationBeeperItem1.stop();this.$NotificationBeeperItem1=null;}};l.prototype.render=function(){'use strict';var m=this.props.beep,n=this.$NotificationBeeperItem3(m.beepRenderer);return c('React').createElement('li',{className:this.state.hidden?"hidden_elem":'',ref:'item','data-gt':m.tracking},c('React').createElement(n,{beep:m,className:"_3sod"+(this.state.fadedIn?' '+"_3soe":''),onHide:this.$NotificationBeeperItem2,onReadyToHide:this.props.onReadyToHide,onPreventHide:this.props.onPreventHide,ref:'itemContents'}));};l.prototype.componentDidUpdate=function(m,n,o){'use strict';if(this.props.fadingOut){if(!this.$NotificationBeeperItem1)this.$NotificationBeeperItem1=new (c('Animation'))(c('ReactDOM').findDOMNode(this.refs.item)).from('opacity','1').to('opacity','0').duration(k).ondone(this.$NotificationBeeperItem2).go();c('ReactDOM').findDOMNode(this.refs.item).style.transitionDuration='0ms';}else if(this.$NotificationBeeperItem1){this.$NotificationBeeperItem1.stop();this.$NotificationBeeperItem1=null;c('Style').set(c('ReactDOM').findDOMNode(this.refs.item),'opacity','1');}};f.exports=l;}),null);
__d('NotificationImpressions',['AsyncSignal','NotificationTokens','URI'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h='/ajax/notifications/impression.php';function i(j,k){var l={ref:k};c('NotificationTokens').untokenizeIDs(j).forEach(function(m,n){l['alert_ids['+n+']']=m;});new (c('AsyncSignal'))(new (c('URI'))(h).getQualifiedURI().toString(),l).send();}f.exports={log:i};}),null);
__d('NotificationPhotoThumbnail',[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(j){if(!j.media||!j.style_list||!j.style_list.length)return null;switch(j.style_list[0]){case 'new_album':case 'album':case 'application':case 'photo':case 'video':case 'video_autoplay':case 'video_inline':return j.media.image;default:return null;}}var i={getThumbnail:function j(k,l,m){var n;if(k&&k.length){k.some(function(r){n=h(r);if(n)return true;return false;});if(n)return n;}if(m){var o=m.relevant_comments;if(o&&o.length){var p=o[0].attachments;if(p&&p.length){n=h(p[0]);if(n)return n;}}}if(l){var q=l.attachments;if(q&&q.length)return h(q[0]);}return null;}};f.exports=i;}),null);
__d('NotificationSound',['Sound'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=5000;c('Sound').init(['audio/mpeg']);function i(j){this._soundPath=j;this._lastPlayed=0;}Object.assign(i.prototype,{play:function j(k){if(!this._soundPath)return;var l=Date.now();if(l-this._lastPlayed<h)return;this._lastPlayed=l;c('Sound').playOnlyIfImmediate(this._soundPath,k);}});f.exports=i;}),null);
__d('NotificationBeeper.react',['cx','Arbiter','ChannelConstants','NotificationBeeperConst','NotificationBeeperItem.react','NotificationBeeperPinnedPostLoader','NotificationConstants','NotificationImpressions','NotificationPhotoThumbnail','NotificationSound','NotificationUpdates','NotificationURI','NotificationUserActions','NotifTestIDs','React','WorkFocusModeController','setTimeoutAcrossTransitions','shield'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('WorkFocusModeController').WorkFocusMode,j=c('NotificationBeeperConst').ACTIVE_DELAY_LONG,k=c('NotificationBeeperConst').BeepStates,l=c('NotificationBeeperConst').FADE_OUT_LENGTH,m=c('NotificationBeeperConst').IDLE_DELAY,n=c('NotificationBeeperPinnedPostLoader').payload,o='beeper',p=c('NotificationConstants').PayloadSourceType,q=p.LIVE_SEND,r=p.OTHER_APPLICATION,s=p.CLIENT,t=c('React').createClass({displayName:'NotificationBeeper',getInitialState:function u(){return {soundEnabled:this.props.soundEnabled,hovering:false,fading:false,beeps:{}};},componentWillMount:function u(){this.subscriptions=[c('NotificationUpdates').subscribe('update-notifications',function(v,w){if(w.payloadsource===q||w.payloadsource===r||w.payloadsource===s){var x=w.nodes;if(x&&x.length){if(i&&i.currentViewerInFocusMode())return;this._handleBeepChanges(this._convertNotifications(x));}}}.bind(this)),c('Arbiter').subscribe(c('ChannelConstants').getArbiterType('notif_sound_pref_changed'),function(v,w){this.setState({soundEnabled:w.obj.enabled});}.bind(this))];c('Arbiter').inform('NotificationBeeper/mounted',null,c('Arbiter').BEHAVIOR_PERSISTENT);if(n)this._handleBeepChanges(this._convertNotifications(n.nodes));},componentWillUnmount:function u(){this.subscriptions.forEach(function(v){v.unsubscribe();});this.subscriptions=null;},_onMouseEnter:function u(){this._hideWait&&clearTimeout(this._hideWait);var v=[],w=this.state.beeps;Object.keys(w).forEach(function(x){if(w[x].state!=k.PENDING){v.push(x);}else w[x].state=k.RENDERED;});c('NotificationUserActions').markNotificationsAsSeen(v);this.setState({hovering:true,fading:false,beeps:w});},_onMouseLeave:function u(){this._waitToHide(j);this.setState({hovering:false});},_onInsertedItem:function u(v){if(!this.state.hovering)this._waitToHide();if(this.state.soundEnabled&&v.sound){if(!this._notifSound)this._notifSound=new (c('NotificationSound'))(this.props.soundPath);this._notifSound.play(v.beepID);}if(this.props.shouldLogImpressions)c('NotificationImpressions').log([v.notificationID],o);},_waitToHide:function u(v){this._hideWait&&clearTimeout(this._hideWait);this._hideWait=c('setTimeoutAcrossTransitions')(c('shield')(this._hide,this),v==null?m:v);},_onReadyToHide:function u(v,w){this.state.beeps[v].state=k.READY_TO_HIDE;if(!this._hideWait)this._waitToHide(w);},_onPreventHide:function u(v){this.state.beeps[v].state=k.RENDERED;},_hide:function u(){this._hideWait=null;var v=this.state.beeps;Object.keys(v).forEach(function(w){if(v[w].state==k.READY_TO_HIDE)v[w].state=k.FADING_OUT;});this.setState({fading:true});c('setTimeoutAcrossTransitions')(c('shield')(this._finishHide,this),l);},_finishHide:function u(){if(!this.state.fading)return;var v=this.state.beeps;Object.keys(v).forEach(function(w){if(v[w].state==k.FADING_OUT)delete v[w];});this.setState({fading:false,beeps:v});c('setTimeoutAcrossTransitions')(function(){var w=this.state.beeps;Object.keys(w).forEach(function(x){if(w[x].state==k.PENDING)w[x].state=k.RENDERED;});this.setState({beeps:w});}.bind(this));},_handleBeepChanges:function u(v){var w=this.state.fading?k.PENDING:k.RENDERED,x=this.state.beeps,y=false;Object.keys(v).reverse().forEach(function(z){var aa={state:w,data:v[z]};if(!x[z]||x[z].data.beepID!=aa.data.beepID){if(x[z]){y=true;if(aa.data.beepUpdatesOnTop)delete x[z];}x[z]=aa;}});if(y)this._waitToHide();this.forceUpdate();},render:function u(){var v=this.state.beeps,w=[];Object.keys(v).reverse().forEach(function(z){var aa=v[z];if(aa.state==k.PENDING)return;w.push(c('React').createElement(c('NotificationBeeperItem.react'),{key:z,fadingOut:this.state.fading&&aa.state==k.FADING_OUT,beep:aa.data,onInserted:this._onInsertedItem,onReadyToHide:this._onReadyToHide,onPreventHide:this._onPreventHide}));},this);var x=w.length>0,y=(!x?"hidden_elem":'')+(' '+"_50d1");return (c('React').createElement('ul',{ref:'container',className:y,'data-gt':this.props.tracking,'data-testid':c('NotifTestIDs').BEEPER_LIST,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave},w));},_convertNotifications:function u(v){var w={};v.forEach(function(x){if(!x.showBeep||!x.alert_id)return;var y=x.alert_id,z=y+'-'+x.receivedTime,aa=c('NotificationPhotoThumbnail').getThumbnail(x.attachments,x.attached_story);w[y]={notificationID:y,notifID:x.id,beepID:z,beepRenderer:x.beepRenderer,rendererData:x.rendererData,beepUpdatesOnTop:x.beepUpdatesOnTop,actors:x.unaggregatedActors||x.actors,icon:x.icon,link:x.url?c('NotificationURI').localize(x.url):'#',url:x.url,ajaxifyLink:x.ajaxify_url,photo:aa,text:x.unaggregatedTitle||x.title,timestamp:x.timestamp,receivedTime:x.receivedTime,sound:!!x.sound,tracking:x.tracking};});return w;}});f.exports=t;}),null);
__d('NotificationBeeperContainer',['NotificationBeeper.react','React','ReactDOM'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={renderBeeper:function i(j,k){c('ReactDOM').render(c('React').createElement(c('NotificationBeeper.react'),j),k);}};f.exports=h;}),null);
__d('EXHPLeftNavController',['cx','csx','Arbiter','Bootloader','Event','Parent','UIPagelet','emptyFunction','requireWeak'],(function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=void 0;function k(){if(!j){j=true;c('Bootloader').loadModules(["LeftNavActions","BookmarkPopoverMenu.react","LeftNavDragController","LeftNavItemDraggableBehavior"],c('emptyFunction'),'EXHPLeftNavController');}}var l=void 0;function m(){if(!l){l=true;c('UIPagelet').loadFromEndpoint('ReactLeftNavPagelet','pagelet_navigation').setHandler(function(){l=false;if(o){o.remove();o=null;}});}}var n={},o=void 0,p={init:function t(u){o=c('Event').listen(u,'click',function(event){var v=event.target,w=c('Parent').byAttribute(v,'data-nav-item-id');if(!w)return;var x=w.getAttribute('data-nav-item-id'),y=c('Parent').bySelector(v,"._26tg");if(y){q(y,x);event.preventDefault();}else r(w,x);});},consumeDidHaveClick:function t(u){var v=n[u];delete n[u];return !!v;}};function q(t,u){t.parentNode.replaceChild(s(),t);n[u]=true;k();m();}function r(t,u){var v=t.querySelector('.countValue');v&&v.remove();if(t.getAttribute('data-type')==='type_explore_feed'){m();c('requireWeak')('LeftNavController',function(w){c('Arbiter').inform('LeftNavController/topicFeedClick',u);});}}function s(){var t=document.createElement('span');t.className="_2ita _55ym _55yn _55yo";return t;}f.exports=p;}),null);
__d('SyncRequestAcceptedMessage.react',['fbt','cx','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){if(this.props.isSender){return (c('React').createElement('div',null,h._("{receiver} accepted your invite to play {app name}.",[h.param('receiver',c('React').createElement('span',{className:"_dg4"},this.props.receiverName)),h.param('app name',c('React').createElement('span',{className:"_dg5"},this.props.appName))])));}else return (c('React').createElement('div',null,h._("You accepted an invite from {sender} to play {app name}.",[h.param('sender',c('React').createElement('span',{className:"_dg4"},this.props.senderName)),h.param('app name',c('React').createElement('span',{className:"_dg5"},this.props.appName))])));};function m(){j.apply(this,arguments);}m.propTypes={appName:l.string.isRequired,isSender:l.bool.isRequired,receiverName:l.string.isRequired,senderName:l.string.isRequired};f.exports=m;}),null);
__d('SyncRequestCanceledMessage.react',['cx','fbt','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){if(this.props.isSender){return (c('React').createElement('div',null,i._("You canceled an invite to {receiver} to play {app name}.",[i.param('receiver',c('React').createElement('span',{className:"_dg4"},this.props.receiverName)),i.param('app name',c('React').createElement('span',{className:"_dg5"},this.props.appName))])));}else return (c('React').createElement('div',null,i._("{sender} canceled an invitation to play {app name}.",[i.param('sender',c('React').createElement('span',{className:"_dg4"},this.props.senderName)),i.param('app name',c('React').createElement('span',{className:"_dg5"},this.props.appName))])));};function m(){j.apply(this,arguments);}m.propTypes={appName:l.string.isRequired,isSender:l.bool.isRequired,receiverName:l.string.isRequired,senderName:l.string.isRequired};f.exports=m;}),null);
__d('SyncRequestExpiredMessage.react',['fbt','cx','React'],(function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){'use strict';if(this.props.isSender){return (c('React').createElement('div',null,h._("{receiver} missed your invite to play {app name}.",[h.param('receiver',c('React').createElement('span',{className:"_dg4"},this.props.receiverName)),h.param('app name',c('React').createElement('span',{className:"_dg5"},this.props.appName))])));}else return (c('React').createElement('div',null,h._("You missed an invite from {sender} to play {app name}.",[h.param('sender',c('React').createElement('span',{className:"_dg4"},this.props.senderName)),h.param('app name',c('React').createElement('span',{className:"_dg5"},this.props.appName))])));};function m(){'use strict';j.apply(this,arguments);}m.propTypes={appName:l.string.isRequired,isSender:l.bool.isRequired,receiverName:l.string.isRequired,senderName:l.string.isRequired};f.exports=m;}),null);
__d('SyncRequestRejectedMessage.react',['cx','fbt','AsyncRequest','Link.react','React','URI'],(function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;'use strict';for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$SyncRequestRejectedMessage1=function(){var s=new (c('URI'))('/games/block_app/'),t=new (c('AsyncRequest'))().setURI(s);t.setData({app_id:this.props.app.id,source:'sync_request'});t.send();}.bind(this),this.$SyncRequestRejectedMessage2=function(){var s=new (c('URI'))('/games/block_user/'),t=new (c('AsyncRequest'))().setURI(s);t.setData({app_id:this.props.app.id,blockee_uid:this.props.sender.id});t.send();}.bind(this),o;}m.prototype.render=function(){'use strict';if(this.props.isSender){return c('React').createElement('div',null,i._("{receiver} declined your invite to play {app_name}.",[i.param('receiver',c('React').createElement('span',{className:"_dg4"},this.props.receiver.name)),i.param('app_name',c('React').createElement('span',{className:"_dg5"},this.props.app.name))]));}else return c('React').createElement('div',null,i._("You declined an invite from {sender} to play {app_name}.",[i.param('sender',c('React').createElement('span',{className:"_dg4"},this.props.sender.name)),i.param('app_name',c('React').createElement('span',{className:"_dg5"},this.props.app.name))]),c('React').createElement('div',{className:"_13n7"},c('React').createElement('div',null,c('React').createElement(c('Link.react'),{onClick:this.$SyncRequestRejectedMessage1},i._("Block {app}",[i.param('app',this.props.app.name)]))),c('React').createElement('div',null,c('React').createElement(c('Link.react'),{onClick:this.$SyncRequestRejectedMessage2},i._("Block requests from {sender}",[i.param('sender',this.props.sender.name)])))));};m.propTypes={requestId:l.string.isRequired,app:l.object.isRequired,isSender:l.bool.isRequired,receiver:l.object.isRequired,sender:l.object.isRequired};f.exports=m;}),null);
__d('SyncRequestTimer.react',['fbt','React'],(function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes;function l(n){if(n){n=Math.ceil(n);var o=n%60;if(o<10)o='0'+o;var p=Math.floor(n/60);return p+':'+o;}else return "0:00";}i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;m.prototype.render=function(){'use strict';if(this.props.isSender){return (c('React').createElement('div',null,h._("({time_remaining} remaining)",[h.param('time_remaining',l(this.props.timeRemaining))])));}else return (c('React').createElement('div',null,h._("You have {time_remaining} to accept.",[h.param('time_remaining',l(this.props.timeRemaining))])));};function m(){'use strict';i.apply(this,arguments);}m.propTypes={timeRemaining:k.number.isRequired,isSender:k.bool.isRequired,receiverName:k.string.isRequired};f.exports=m;}),null);
__d('SyncRequestTitle.react',['fbt','cx','React'],(function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){'use strict';if(this.props.isSender){return (c('React').createElement('div',null,h._("Waiting for {receiver} to accept your invite to play {app_name}.",[h.param('receiver',c('React').createElement('span',{className:"_dg4"},this.props.receiverName)),h.param('app_name',c('React').createElement('span',{className:"_dg5"},this.props.appName))])));}else return (c('React').createElement('div',null,h._("{sender} wants to play {app_name} with you, right now.",[h.param('sender',c('React').createElement('span',{className:"_dg4"},this.props.senderName)),h.param('app_name',c('React').createElement('span',{className:"_dg5"},this.props.appName))])));};function m(){'use strict';j.apply(this,arguments);}m.propTypes={appName:l.string.isRequired,isSender:l.bool.isRequired,receiverName:l.string.isRequired,senderName:l.string.isRequired};f.exports=m;}),null);
__d("XSyncRequestSubmitController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/platform\/games\/sync_requests\/submit\/",{request_id:{type:"Int",required:true},sender:{type:"Int",required:true},action:{type:"Int",required:true}});}),null);
__d('SyncRequest.react',['cx','fbt','Arbiter','AsyncRequest','ChannelConstants','React','SyncRequestStatusEnum','SyncRequestTitle.react','SyncRequestAcceptedMessage.react','SyncRequestRejectedMessage.react','SyncRequestExpiredMessage.react','SyncRequestCanceledMessage.react','SyncRequestTimer.react','XUIButton.react','XSyncRequestSubmitController','getObjectValues'],(function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;'use strict';for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={buttonsDisabled:false,time:Date.now(),status:this.props.status,viewerIsSender:this.props.viewerId===this.props.sender.id},this.$SyncRequest1=function(){this.$SyncRequest4(c('SyncRequestStatusEnum').ACCEPTED);var s=window.open(this.props.app.uri);if(s)s.focus();}.bind(this),this.$SyncRequest2=function(){this.$SyncRequest4(c('SyncRequestStatusEnum').REJECTED);}.bind(this),this.$SyncRequest3=function(){this.$SyncRequest4(c('SyncRequestStatusEnum').CANCELED);}.bind(this),this.$SyncRequest4=function(s){this.setState({status:s,buttonsDisabled:true});var t=c('XSyncRequestSubmitController').getURIBuilder().setInt('request_id',this.props.requestId).setInt('sender',this.props.sender.id).setInt('action',s).getURI();new (c('AsyncRequest'))().setURI(t).setHandler(function(u){this.setState({status:s});}.bind(this)).setErrorHandler(function(u){this.setState({buttonsDisabled:false});}.bind(this)).send();}.bind(this),o;}m.prototype.componentWillMount=function(){'use strict';if(this.props.status===c('SyncRequestStatusEnum').PENDING){var n=c('Arbiter').subscribe(c('ChannelConstants').getArbiterType('sync_request_updated'),function(q,r){r=r.obj;if(r.id.toString()!==this.props.requestId)return;this.setState({status:r.status});}.bind(this));this.setState({statusEvent:n});}var o=null;if(this.props.status===c('SyncRequestStatusEnum').PENDING){var p=function q(){this.setState({time_remaining:this.state.time_remaining-1});if(this.state.time_remaining<=0){clearInterval(this.state.counter);var r={counter:null,time_remaining:0};if(this.state.status===c('SyncRequestStatusEnum').PENDING)r.status=c('SyncRequestStatusEnum').EXPIRED;this.setState(r);}};o=setInterval(p.bind(this),1000);}this.setState({time_remaining:this.props.timeRemaining,counter:o});};m.prototype.componentWillUnmount=function(){'use strict';if(this.state.counter)clearInterval(this.state.counter);c('Arbiter').unsubscribe(this.state.statusEvent);};m.prototype.componentDidUpdate=function(n,o){'use strict';if(this.props.status!=c('SyncRequestStatusEnum').PENDING)this.state.status=this.props.status;if(this.props.onStatusUpdate)this.props.onStatusUpdate(this.state.status,o.status);};m.prototype.render=function(){'use strict';var n;switch(this.state.status){case c('SyncRequestStatusEnum').PENDING:var o;if(!this.state.viewerIsSender){o=[c('React').createElement(c('XUIButton.react'),{use:'confirm',onClick:this.$SyncRequest1,disabled:this.state.buttonsDisabled,label:i._("Accept")}),c('React').createElement(c('XUIButton.react'),{use:'default',onClick:this.$SyncRequest2,disabled:this.state.buttonsDisabled,label:i._("Decline")})];}else o=c('React').createElement(c('XUIButton.react'),{use:'default',onClick:this.$SyncRequest3,disabled:this.state.buttonsDisabled,label:i._("Cancel")});n=c('React').createElement('div',null,c('React').createElement('div',{className:"_372m"},c('React').createElement(c('SyncRequestTitle.react'),{appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name})),c('React').createElement('div',{className:"_372n"},c('React').createElement(c('SyncRequestTimer.react'),{isSender:this.state.viewerIsSender,timeRemaining:this.state.time_remaining,receiverName:this.props.receiver.name})),c('React').createElement('div',{className:"_372o"},o));break;case c('SyncRequestStatusEnum').ACCEPTED:n=c('React').createElement('div',{className:"_372p mvs"},c('React').createElement(c('SyncRequestAcceptedMessage.react'),{appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name}));break;case c('SyncRequestStatusEnum').REJECTED:n=c('React').createElement('div',{className:"_372p mvs"},c('React').createElement(c('SyncRequestRejectedMessage.react'),{requestId:this.props.requestId,app:this.props.app,isSender:this.state.viewerIsSender,receiver:this.props.receiver,sender:this.props.sender}));break;case c('SyncRequestStatusEnum').EXPIRED:n=c('React').createElement('div',{className:"_372p mvs"},c('React').createElement(c('SyncRequestExpiredMessage.react'),{appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name}));break;case c('SyncRequestStatusEnum').CANCELED:n=c('React').createElement('div',{className:"_372p mvs"},c('React').createElement(c('SyncRequestCanceledMessage.react'),{appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name}));break;default:throw new Error('The request status `%s` is unknown.',this.state.status);}return c('React').createElement('div',{className:"_372q"},n);};m.propTypes={app:l.object.isRequired,creationTime:l.number.isRequired,requestId:l.string.isRequired,receiver:l.object.isRequired,sender:l.object.isRequired,status:l.oneOf(c('getObjectValues')(c('SyncRequestStatusEnum'))).isRequired,timeout:l.number.isRequired,timeRemaining:l.number.isRequired,viewerId:l.number.isRequired,onStatusUpdate:l.func};f.exports=m;}),null);
__d("XQuickPromotionSimpleLoggingController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/qp\/action\/log\/",{qp_id:{type:"Int",required:true},qp_action:{type:"Enum",enumType:1},qp_instance_log_data:{type:"StringToStringMap",defaultValue:{}},qp_event:{type:"String"}});}),null);
__d('QPRenderer',['$','CSS','XAsyncRequest','XQuickPromotionSimpleLoggingController'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=function m(n,event,o){var p=c('XQuickPromotionSimpleLoggingController').getURIBuilder().setInt('qp_id',n).setString('qp_event',event).setStringToStringMap('qp_instance_log_data',o).getURI();new (c('XAsyncRequest'))(p).send();},i=function m(n,o,p){var q=c('XQuickPromotionSimpleLoggingController').getURIBuilder().setInt('qp_id',n).setEnum('qp_action',o).setStringToStringMap('qp_instance_log_data',p).getURI();new (c('XAsyncRequest'))(q).send();},j=function m(n,o,p,q,r,s){l(n,p,c('$')(q),s,function(){if(r)c('CSS').hide(o);});},k=function m(n,o,p){o.show();h(n,'view',{});o.subscribe('cancel',function(){h(n,'dialog_cancel',{});});for(var q=0;q<p.length;q++){var r=p[q],s=c('$')(r.element_id);l(n,r.action,s,r.instance_log_data,function(){if(r.should_close)o.hide();});if(r.action=='primary')s.focus();}},l=function m(n,o,p,q,r){p.addEventListener('click',function(){var s=c('XQuickPromotionSimpleLoggingController').getURIBuilder().setInt('qp_id',n).setEnum('qp_action',o).setStringToStringMap('qp_instance_log_data',q).getURI();new (c('XAsyncRequest'))(s).send();r();});};g.setAction=j;g.setDialogActionsAndShow=k;g.logAction=i;g.logEvent=h;}),null);
__d('JewelQPLogging',['QPRenderer'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=false,i=null,j=false;function k(){if(j)return;if(h&&i){j=true;c('QPRenderer').logEvent(i.promotion_id,'view',i.instance_log_data?i.instance_log_data:{});}}var l={onJewelOpened:function m(){h=true;k();},updateQPLogData:function m(n){i=n;k();}};f.exports=l;}),null);
__d('RequestsJewelStore',['Arbiter','ArbiterMixin','ChannelConstants'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=babelHelpers['extends']({},c('ArbiterMixin'),{_initialized:false,_count:0,_requestList:{},addFriendRequests:function i(j){Object.assign(this._requestList,j);},getRequestListKeys:function i(){return Object.keys(this._requestList);},removeRequest:function i(j){delete this._requestList[j];},getRequestCount:function i(j){return this.getRequestListKeys().length;},decrementCount:function i(){this.setCount(Math.max(0,this._count-1));},setCount:function i(j){c('Arbiter').inform('jewel/count-updated',{jewel:'requests',count:j},c('Arbiter').BEHAVIOR_STATE);},setupListeners:function i(){if(this._initialized)return;this._initialized=true;c('Arbiter').subscribe('jewel/count-updated',function(j,k){k.jewel==='requests'&&this._updateCount(k.count);}.bind(this));c('Arbiter').subscribe(c('ChannelConstants').getArbiterType('jewel_requests_add'),function(j,k){return this._addRequest(k);}.bind(this));c('Arbiter').subscribe(c('ChannelConstants').getArbiterType('jewel_friending_notifs'),function(j,k){return this._addNotification(k);}.bind(this));c('Arbiter').subscribe(c('ChannelConstants').getArbiterType('jewel_requests_remove_old'),function(j,k){return this._removeOldRequest(k);}.bind(this));c('Arbiter').subscribe(c('ChannelConstants').getArbiterType('friend_requests_seen'),function(j,k){return this.setCount(0);}.bind(this));},_updateCount:function i(j){var k=this._count!==j;this._count=j;if(k)this.inform('countUpdated',j);},_addRequest:function i(j){if(!j)return;var k=j.obj,l=k.from,m=k.suggester,n=this._requestList[l];if(!n)this.setCount(this._count+1);var o=n?n.type:null,p=o===19&&!m;this.inform('addRequest',{shouldReplace:p,previousType:o});},_addNotification:function i(j){if(!j||j.obj.notif_type!=='friend_confirmed')return;this.inform('addNotification');},_removeOldRequest:function i(j){if(!j)return;var k=this._requestList[j.obj.from];if(!k)return;this.inform('removeOldRequest',k);}});f.exports=h;}),null);
__d('RequestsJewelController',['invariant','Promise','Arbiter','AsyncRequest','AsyncSignal','CSS','DOM','DOMQuery','Event','JewelConstants','JewelQPLogging','MarauderLogger','Parent','RequestsJewelStore','ScrollableArea','ge','getElementPosition','getViewportDimensions','requireWeak','throttle'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=null;c('requireWeak')('FriendBrowserCheckboxController',function(o){return i=o;});var j=31,k=499,l=30,m=160;n.getInstance=function(){'use strict';return this.$RequestsJewelController11;};n.updateFromDOM=function(){'use strict';var o=this.getInstance();if(o)o.fromDom();};n.setupScroll=function(){'use strict';var o=this.getInstance();if(o)o.setupScroll();};n.setInitialHeight=function(){'use strict';var o=this.getInstance();if(o)o.updateHeight();};n.maybeLoadJewel=function(){'use strict';var o=this.getInstance();if(o)o.maybeLoadJewel();};n.isOpen=function(){'use strict';var o=this.getInstance();if(o)return o.$RequestsJewelController3();return false;};n.create=function(o,p,q){'use strict';!!this.$RequestsJewelController11?h(0):void 0;return this.$RequestsJewelController11=new n(o,p,q);};function n(o,p,q){'use strict';this.$RequestsJewelController3=p;this.$RequestsJewelController2=q;this.$RequestsJewelController1=o;this.$RequestsJewelController5=-1;this.$RequestsJewelController6=-1;this.$RequestsJewelController10=c('Promise').resolve(true);this.$RequestsJewelController8=c('throttle').acrossTransitionsWithBlocking(function(){return this.$RequestsJewelController12({log_impressions:true});}.bind(this),5000);c('RequestsJewelStore').subscribe('addRequest',this.$RequestsJewelController13.bind(this));c('RequestsJewelStore').subscribe('addNotification',function(){return this.$RequestsJewelController14();}.bind(this));c('RequestsJewelStore').subscribe('removeOldRequest',this.$RequestsJewelController15.bind(this));c('RequestsJewelStore').setupListeners();this.setupScroll();this.$RequestsJewelController16();this.$RequestsJewelController17();this.$RequestsJewelController18();}n.prototype.fromDom=function(){'use strict';var o={};c('DOMQuery').scry(this.$RequestsJewelController1,'li.objectListItem').forEach(function(p){var q=p.getAttribute('id');if(q){var r=this.$RequestsJewelController19(q);if(r&&r.requester)o[r.requester]=r;}}.bind(this));c('RequestsJewelStore').addFriendRequests(o);this.$RequestsJewelController20();};n.prototype.maybeLoadJewel=function(){'use strict';if(this.$RequestsJewelController9){this.$RequestsJewelController9=false;this.openHandler();}};n.prototype.updateHeight=function(){'use strict';var o=this.$RequestsJewelController21();if(o)o.style.height=this.$RequestsJewelController22()+'px';};n.prototype.markSeen=function(){'use strict';this.$RequestsJewelController10.done(function(){var o=c('DOMQuery').scry(this.$RequestsJewelController1,'li[id]')[0];new (c('AsyncSignal'))('/ajax/gigaboxx/endpoint/UpdateLastSeenTime.php',{folder:this.$RequestsJewelController2,first_item:o.getAttribute('id')}).send();}.bind(this));};n.prototype.openHandler=function(){'use strict';c('Arbiter').inform('requestsJewel/opened');var o=c('ge')('fbRequestsJewelLoading'),p=this.$RequestsJewelController21();if(!o&&!p){this.$RequestsJewelController9=true;}else if(o){this.$RequestsJewelController8();}else{var q=c('RequestsJewelStore').getRequestListKeys();if(q.length>0)new (c('AsyncRequest'))().setAllowCrossPageTransition(true).setURI('/friends/requests/log_impressions').setData({ids:q.join(','),ref:'jewel'}).send();}p&&c('ScrollableArea').poke(p);c('JewelQPLogging').onJewelOpened();};n.prototype.closeHandler=function(){'use strict';c('Arbiter').inform('requestsJewel/closed');c('DOMQuery').scry(this.$RequestsJewelController1,'li.jewelItemNew').forEach(function(o){c('CSS').removeClass(o,'jewelItemNew');});};n.prototype.setupScroll=function(){'use strict';var o=this.$RequestsJewelController21();if(o){this.$RequestsJewelController7=this.$RequestsJewelController23();this.$RequestsJewelController4=0;c('ScrollableArea').getInstance(o).subscribe('scroll',this.$RequestsJewelController24.bind(this));this.$RequestsJewelController25();this.$RequestsJewelController26();}};n.prototype.$RequestsJewelController16=function(){'use strict';c('Event').listen(this.$RequestsJewelController1,'submit',function(o){var p=c('Parent').byClass(o.getTarget(),'objectListItem');if(p){c('CSS').removeClass(p,'jewelItemNew');c('CSS').addClass(p,'jewelItemResponded');}});};n.prototype.$RequestsJewelController17=function(){'use strict';c('Event').listen(window,'resize',c('throttle').acrossTransitions(function(){this.updateHeight();}.bind(this)));};n.prototype.$RequestsJewelController18=function(){'use strict';c('Arbiter').subscribe('pymk-x-out',function(o,p){var q=p.location;if(q==='pymk_jewel_first_page'||q==='pymk_jewel')this.$RequestsJewelController25();}.bind(this));};n.prototype.$RequestsJewelController27=function(o){'use strict';var p=parseInt(o,10);return !isNaN(p)?p:null;};n.prototype.$RequestsJewelController19=function(o){'use strict';var p=o.match(/^(\d+)_(\d+)/);if(!p)return null;return {requester:this.$RequestsJewelController27(p[1]),type:this.$RequestsJewelController27(p[2])};};n.prototype.$RequestsJewelController28=function(o,p){'use strict';if(o==null||p==null)return null;return o+'_'+p;};n.prototype.$RequestsJewelController21=function(){'use strict';return c('DOMQuery').scry(this.$RequestsJewelController1,'.uiScrollableArea')[0];};n.prototype.$RequestsJewelController23=function(){'use strict';return c('DOMQuery').scry(this.$RequestsJewelController1,'.uiScrollableAreaWrap')[0];};n.prototype.$RequestsJewelController24=function(){'use strict';var o=c('DOMQuery').scry(this.$RequestsJewelController7,'.uiMorePager').pop();if(o){var p=c('getElementPosition')(o).y;if(p>0)c('CSS').addClass(this.$RequestsJewelController21(),'contentAfter');var q=c('DOMQuery').find(o,'a');if(!q)return;var r=c('getElementPosition')(q).y;if(r===this.$RequestsJewelController4)return;var s=c('getElementPosition')(this.$RequestsJewelController7),t=s.y+s.height;if(r-300<t&&r>0){this.$RequestsJewelController4=r;var u=q.getAttribute('ajaxify');if(u){new (c('AsyncRequest'))(u).setRelativeTo(q).setStatusElement(c('Parent').byClass(q,'stat_elem')).send();}else if(i)i.getInstance('jewel').showMore();}}this.$RequestsJewelController25();this.$RequestsJewelController26();};n.prototype.$RequestsJewelController25=function(){'use strict';if(!this.$RequestsJewelController7)return;var o=c('getElementPosition')(this.$RequestsJewelController7),p=o.y+o.height,q=c('DOMQuery').scry(this.$RequestsJewelController1,'li.friendBrowserListUnit'),r=q.length-1;while(r>this.$RequestsJewelController5){var s=c('getElementPosition')(q[r]),t=s.y,u=t+s.height;if(t>0&&u<=p)break;r-=1;}var v=r;while(r>this.$RequestsJewelController5){var w=c('DOMQuery').find(q[r],'input.friendBrowserID'),x=parseInt(w.value,10);c('MarauderLogger').log('regular_pymk_imp',undefined,{pymk_id:x,pymk_location:'pymk_jewel'});r-=1;}this.$RequestsJewelController5=Math.max(this.$RequestsJewelController5,v);};n.prototype.$RequestsJewelController26=function(){'use strict';if(!this.$RequestsJewelController7)return;var o=c('getElementPosition')(this.$RequestsJewelController7),p=o.y+o.height,q=c('DOMQuery').scry(this.$RequestsJewelController1,'li.objectListItem'),r=q.length-1;while(r>this.$RequestsJewelController6){var s=c('getElementPosition')(q[r]),t=s.y,u=t+s.height;if(t>0&&u<=p)break;r-=1;}var v=r;while(r>this.$RequestsJewelController6){var w=q[r].getAttribute('id');w=w.substring(0,w.length-6);c('MarauderLogger').log('request_seen','friend_request_waterfall',{request_id:w,request_location:'requests_jewel'});r-=1;}this.$RequestsJewelController6=Math.max(this.$RequestsJewelController6,v);};n.prototype.$RequestsJewelController12=function(){var o=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];'use strict';this.$RequestsJewelController10=new (c('Promise'))(function(p,q){var r=!c('ge')('fbRequestsJewelLoading');new (c('AsyncRequest'))().setURI('/ajax/requests/loader/').setData(babelHelpers['extends']({},o,{reloadcontent:r})).setFinallyHandler(function(s){if(!s.getError()){p(true);}else q();}).send();});};n.prototype.$RequestsJewelController14=function(){'use strict';if(this.$RequestsJewelController3())return;this.$RequestsJewelController12();};n.prototype.$RequestsJewelController13=function(o,p){var q=p.shouldReplace,r=p.previousType;'use strict';if(!q&&(r||this.$RequestsJewelController3()))return;this.$RequestsJewelController12();};n.prototype.$RequestsJewelController15=function(o,p){var q=p.requester,r=p.type;'use strict';if(this.$RequestsJewelController3()||c('ge')('fbRequestsJewelLoading')!=null)return;var s=this.$RequestsJewelController28(q,r),t=s&&c('ge')(s);if(t){if(c('CSS').hasClass(t,'jewelItemNew'))c('RequestsJewelStore').decrementCount();if(!c('CSS').hasClass(t,'jewelItemResponded')){c('DOM').remove(t);c('RequestsJewelStore').removeRequest(q);this.$RequestsJewelController20();}}};n.prototype.$RequestsJewelController20=function(){'use strict';c('DOMQuery').scry(this.$RequestsJewelController1,'li.empty').forEach(function(o){c('CSS').conditionShow(o,c('RequestsJewelStore').getRequestCount()<=0);});};n.prototype.$RequestsJewelController22=function(){'use strict';return Math.min(Math.max(c('getViewportDimensions')().height-m,l),c('JewelConstants').FLYOUT_MAX_HEIGHT||k)+j;};n.$RequestsJewelController11=null;f.exports=n;}),null);
__d('SyncRequestNotificationBeeperItemContents.react',['cx','Animation','Image.react','ImageBlock.react','NotificationBeeperItemCloseButton.react','NotificationUserActions','React','ReactDOM','SyncRequest.react','SyncRequestStatusEnum'],(function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(){var l,m;'use strict';for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.$SyncRequestNotificationBeeperItemContents1=function(){c('NotificationUserActions').markNotificationsAsRead([this.props.beep.notificationID]);this.props.onHide();}.bind(this),this.$SyncRequestNotificationBeeperItemContents2=function(){this.$SyncRequestNotificationBeeperItemContents1();this.props.onHide();}.bind(this),this.$SyncRequestNotificationBeeperItemContents3=function(){new (c('Animation'))(c('ReactDOM').findDOMNode(this.refs.inner)).from('opacity','0').to('opacity','1').duration(200).go();}.bind(this),this.onRequestStatusUpdate=function(q,r){if(q!=c('SyncRequestStatusEnum').PENDING&&r==c('SyncRequestStatusEnum').PENDING)this.props.onReadyToHide(this.props.beep.notificationID);}.bind(this),m;}k.prototype.componentDidMount=function(){'use strict';if(this.props.beep.rendererData.status!=c('SyncRequestStatusEnum').PENDING)this.props.onReadyToHide(this.props.beep.notificationID);};k.prototype.componentDidUpdate=function(l){'use strict';if(this.props.beep.rendererData.status!=c('SyncRequestStatusEnum').PENDING&&l.beep.rendererData.status==c('SyncRequestStatusEnum').PENDING)this.props.onReadyToHide(this.props.beep.notificationID);};k.prototype.render=function(){'use strict';var l=this.props.beep,m=l.rendererData;return (c('React').createElement('div',{ref:'inner',className:this.props.className},c('React').createElement(c('NotificationBeeperItemCloseButton.react'),{onClick:this.$SyncRequestNotificationBeeperItemContents2}),c('React').createElement(c('ImageBlock.react'),{className:"_3soj"},c('React').createElement(c('Image.react'),{src:l.actors[0].profile_picture.uri,className:"_3sok"}),c('React').createElement('div',{className:"_3sol"},c('React').createElement(c('SyncRequest.react'),{app:m.app,creationTime:m.creation_time,requestId:m.id.toString(),receiver:m.receiver,sender:m.sender,status:m.status,timeout:m.timeout,timeRemaining:m.time_remaining,viewerId:m.receiver.id,onStatusUpdate:this.onRequestStatusUpdate})))));};f.exports=k;}),null);
__d('LiveMessageReceiver',['Arbiter','ChannelConstants','emptyFunction','shield'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){this.eventName=i;this.subs=null;this.handler=c('emptyFunction');this.shutdownHandler=null;this.registered=false;this.appId=1;}Object.assign(h,{getAppMessageType:function i(j,k){return 'live_message/'+j+':'+k;},route:function i(j){var k=function l(m){var n=h.getAppMessageType(j.app_id,j.event_name);c('Arbiter').inform(n,m,c('Arbiter').BEHAVIOR_PERSISTENT);};k(j.response);}});Object.assign(h.prototype,{setAppId:function i(j){this.appId=j;return this;},setHandler:function i(j){this.handler=j;this._dirty();return this;},setRestartHandler:c('emptyFunction'),setShutdownHandler:function i(j){this.shutdownHandler=c('shield')(j);this._dirty();return this;},_dirty:function i(){if(this.registered){this.unregister();this.register();}},register:function i(){var j=function(l,m){return this.handler(m);}.bind(this),k=h.getAppMessageType(this.appId,this.eventName);this.subs={};this.subs.main=c('Arbiter').subscribe(k,j);if(this.shutdownHandler)this.subs.shut=c('Arbiter').subscribe(c('ChannelConstants').ON_SHUTDOWN,this.shutdownHandler);this.registered=true;return this;},unregister:function i(){if(!this.subs)return this;for(var j in this.subs)if(this.subs[j])this.subs[j].unsubscribe();this.subs=null;this.registered=false;return this;}});f.exports=h;}),null);
__d('initLiveMessageReceiver',['Arbiter','ChannelConstants','LiveMessageReceiver'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();c('Arbiter').subscribe(c('ChannelConstants').getArbiterType('app_msg'),function(h,i){c('LiveMessageReceiver').route(i.obj);});}),null);